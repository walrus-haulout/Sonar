# =============================================================================
# SONAR Project - Shared Environment Variables
# =============================================================================
# This file contains all shared environment variables used across services.
# For Railway deployment, set shared variables at the PROJECT level so they
# are available to all services (backend, audio-verifier, frontend, seal-keyserver).
#
# Service-specific variables should be set at the SERVICE level in Railway.
# See individual service directories for service-specific variables:
# - backend/.env.example
# - audio-verifier/env.example
# - frontend/.env.local.example (if exists)
# - seal-keyserver/README.md
#
# =============================================================================
# SHARED INFRASTRUCTURE
# =============================================================================

# PostgreSQL Database (Railway auto-provides when Postgres is linked)
# Used by: backend, audio-verifier
# Railway automatically sets this when you link a Postgres service to your project
DATABASE_URL=postgresql://user:password@host:port/database

# =============================================================================
# BLOCKCHAIN / SUI NETWORK
# =============================================================================

# Sui RPC URL
# Used by: backend
# Testnet: https://fullnode.testnet.sui.io:443
# Mainnet: https://fullnode.mainnet.sui.io:443
SUI_RPC_URL=https://fullnode.testnet.sui.io:443

# SONAR Contract Package ID (on-chain)
# Used by: backend
# Get from: contracts/deployments/testnet.json or contracts/deployments/mainnet.json
SONAR_PACKAGE_ID=0x0000000000000000000000000000000000000000000000000000000000000000

# SONAR Marketplace Object ID (on-chain)
# Used by: backend
SONAR_MARKETPLACE_ID=0x0000000000000000000000000000000000000000000000000000000000000000

# Frontend Blockchain Config (NEXT_PUBLIC_* prefix required for client-side)
# Used by: frontend (client-side)
# These are exposed to the browser, so use NEXT_PUBLIC_ prefix
NEXT_PUBLIC_NETWORK=testnet
NEXT_PUBLIC_RPC_URL=https://fullnode.testnet.sui.io
NEXT_PUBLIC_PACKAGE_ID=0x0000000000000000000000000000000000000000000000000000000000000000
NEXT_PUBLIC_MARKETPLACE_ID=0x0000000000000000000000000000000000000000000000000000000000000000
NEXT_PUBLIC_STATS_OBJECT_ID=0x0000000000000000000000000000000000000000000000000000000000000000
NEXT_PUBLIC_REWARD_POOL_ID=0x0000000000000000000000000000000000000000000000000000000000000000
NEXT_PUBLIC_USE_BLOCKCHAIN=true

# =============================================================================
# WALRUS STORAGE
# =============================================================================

# Walrus Aggregator URL (for fetching encrypted blobs)
# Used by: backend, audio-verifier, frontend
# Testnet: https://aggregator.walrus-testnet.walrus.space
# Mainnet: https://aggregator.walrus-mainnet.walrus.space
WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space

# Walrus Publisher URL (for uploading blobs)
# Used by: backend, audio-verifier (legacy)
# Testnet: https://publisher.walrus-testnet.walrus.space
# Mainnet: https://publisher.walrus-mainnet.walrus.space
WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space

# Walrus Aggregator Token (optional bearer token)
# Used by: audio-verifier, frontend
WALRUS_AGGREGATOR_TOKEN=

# Walrus Upload Token (for legacy plaintext uploads)
# Used by: audio-verifier (legacy flow)
WALRUS_UPLOAD_TOKEN=

# Frontend Walrus URLs (NEXT_PUBLIC_* prefix required for client-side)
# Used by: frontend (client-side)
NEXT_PUBLIC_WALRUS_PUBLISHER_URL=https://publisher.walrus-testnet.walrus.space
NEXT_PUBLIC_WALRUS_AGGREGATOR_URL=https://aggregator.walrus-testnet.walrus.space

# =============================================================================
# SEAL NETWORK (Encryption/Decryption)
# =============================================================================

# Seal Network URL
# Used by: backend
# Testnet: https://seal.testnet.mysten.com
# Mainnet: https://seal.mainnet.mysten.com
SEAL_NETWORK_URL=https://seal.testnet.mysten.com

# Seal Package ID (for decryption)
# Used by: audio-verifier
SEAL_PACKAGE_ID=0x0000000000000000000000000000000000000000000000000000000000000000

# Seal Threshold (number of key servers required)
# Used by: audio-verifier
SEAL_THRESHOLD=2

# Seal Secret Keys (comma-separated, for decryption)
# Used by: audio-verifier
SEAL_SECRET_KEYS=key1,key2,key3

# Seal Key Server IDs (comma-separated object IDs)
# Used by: audio-verifier, frontend
SEAL_KEY_SERVER_IDS=id1,id2,id3

# Frontend Seal Key Servers (NEXT_PUBLIC_* prefix required for client-side)
# Used by: frontend (client-side)
# Format: comma-separated object IDs (e.g., "0x123...,0x456...")
NEXT_PUBLIC_SEAL_KEY_SERVERS=

# Seal Key Server Master Key (for seal-keyserver service)
# Used by: seal-keyserver
# Format: 0x + 64 hex characters (32-byte seed)
MASTER_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Seal Key Server Object ID (on-chain)
# Used by: seal-keyserver
KEY_SERVER_OBJECT_ID=0x0000000000000000000000000000000000000000000000000000000000000000

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Secret (for backend authentication)
# Used by: backend
# Generate with: openssl rand -hex 32
JWT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# JWT Expiration Time
# Used by: backend
JWT_EXPIRES_IN=24h

# Verifier Auth Token (for audio-verifier service authentication)
# Used by: audio-verifier, frontend (server-side proxy)
# Generate with: openssl rand -hex 32
VERIFIER_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# AI SERVICES
# =============================================================================

# OpenRouter API Key (for transcription and AI analysis)
# Used by: backend (if used), audio-verifier, frontend (server-side)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# AcoustID API Key (for copyright detection)
# Used by: audio-verifier
# Get from: https://acoustid.org/api-key
ACOUSTID_API_KEY=xxxxxxxxxxxxxxxx

# Blockberry API Key (optional, for enhanced features)
# Used by: frontend (server-side)
BLOCKBERRY_API_KEY=

# =============================================================================
# CORS / ORIGINS
# =============================================================================

# CORS Allowed Origins (comma-separated list of frontend URLs)
# Used by: backend, audio-verifier
# Standardized name across all services (replaces ALLOWED_ORIGINS in audio-verifier)
CORS_ORIGIN=http://localhost:3000,https://your-frontend-domain.com

# =============================================================================
# SERVICE URLs
# =============================================================================

# Audio Verifier Service URL
# Used by: frontend (server-side proxy)
# Default: http://localhost:8000 (local) or Railway URL (production)
AUDIO_VERIFIER_URL=http://localhost:8000

# Backend API URL (if needed by other services)
# Used by: frontend (if needed)
BACKEND_URL=http://localhost:3001

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================

# Sentry DSN (optional, for error tracking)
# Used by: backend
SENTRY_DSN=

# Log Level
# Used by: backend
# Options: debug, info, warn, error
LOG_LEVEL=info

# Node Environment
# Used by: backend, frontend
# Options: development, production, test
NODE_ENV=development

# =============================================================================
# RAILWAY DEPLOYMENT NOTES
# =============================================================================
#
# Railway Shared Variables Setup:
# 1. Set shared variables at PROJECT level in Railway dashboard
#    - These will be available to all services
# 2. Set service-specific variables at SERVICE level
# 3. DATABASE_URL is automatically provided when Postgres is linked
#
# Variables that Railway provides automatically:
# - DATABASE_URL (when Postgres is linked)
# - PORT (for each service)
# - RAILWAY_ENVIRONMENT (development/production)
#
# Recommended Railway Project Variables (shared):
# - DATABASE_URL (auto-provided)
# - SUI_RPC_URL
# - SONAR_PACKAGE_ID
# - SONAR_MARKETPLACE_ID
# - WALRUS_AGGREGATOR_URL
# - WALRUS_PUBLISHER_URL
# - SEAL_NETWORK_URL
# - SEAL_PACKAGE_ID
# - CORS_ORIGIN
# - OPENROUTER_API_KEY
# - ACOUSTID_API_KEY
# - VERIFIER_AUTH_TOKEN
# - JWT_SECRET
#
# Service-Specific Variables (set at service level):
# - Backend: JWT_EXPIRES_IN, LOG_LEVEL, MOCK_WALRUS, MOCK_SEAL
# - Audio-Verifier: MAX_FILE_SIZE_GB, ENABLE_LEGACY_UPLOAD, PORT
# - Frontend: NEXT_PUBLIC_* variables (client-side)
# - Seal-Keyserver: MASTER_KEY, KEY_SERVER_OBJECT_ID, CONFIG_PATH
#
# =============================================================================
