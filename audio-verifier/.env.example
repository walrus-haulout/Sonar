# =============================================================================
# SONAR Audio Verifier - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values

# Audio Fingerprinting (Copyright Detection)
# Get your free API key at: https://acoustid.org/api-key
ACOUSTID_API_KEY=your_acoustid_api_key_here

# Google Gemini AI (Transcription & Analysis)
# Get your API key at: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Security
# Generate a random 256-bit token for authentication
# Example: openssl rand -hex 32
VERIFIER_AUTH_TOKEN=your_random_256_bit_token_here

# CORS Configuration
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://yourdomain.com,http://localhost:3000

# File Upload Limits
# Maximum file size in GB (default: 13GB to match Walrus limit)
MAX_FILE_SIZE_GB=13

# Optional: Copyright Database Paths
# Only needed if using Dejavu or Audfprint for additional copyright detection
# DEJAVU_DB_PATH=/app/databases/dejavu.db
# AUDFPRINT_DB_PATH=/app/databases/audfprint.pklz

# =============================================================================
# Sui Blockchain Configuration
# =============================================================================

# Sui Network (mainnet, testnet, devnet, localnet)
SUI_NETWORK=testnet

# Validator Private Key (format: "key_scheme://base64_key")
# Generate with: sui keytool generate ed25519
# Example: ed25519://AQEBAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZGhscHR4fIA==
SUI_VALIDATOR_KEY=your_validator_private_key_here

# Deployed SONAR Package Object ID
# Get this after deploying contracts with: sui client publish
SUI_PACKAGE_ID=0x...

# Shared SessionRegistry Object ID
# Get this from package deployment events
SUI_SESSION_REGISTRY_ID=0x...

# ValidatorCap Object ID (owned by validator)
# Get this from package deployment or admin authorization
SUI_VALIDATOR_CAP_ID=0x...

# =============================================================================
# Seal Encrypted Blob Verification Configuration (CRITICAL)
# =============================================================================
# These settings are required for verifying encrypted audio blobs stored on Walrus.
# Failure to configure these correctly will result in "InvalidInput" errors from seal-cli.
#
# IMPORTANT: In production, ALWAYS set SEAL_SECRET_KEYS in your deployment environment.
# Do NOT hardcode real secrets in this file. Use your deployment platform's secrets manager:
# - Vercel: Project settings > Environment Variables
# - Docker: -e flag or docker-compose environment section
# - Kubernetes: ConfigMap or Secrets
# - Local: export SEAL_SECRET_KEYS=... before running

# Seal Secret Keys (REQUIRED for production)
# Format: Comma-separated list of hex-encoded keys (each 32+ characters, starting with 0x)
# These are the CLIENT_MASTER_KEYs from your Seal keyserver deployments
# Example: SEAL_SECRET_KEYS=0x1d0792389049f3a6960b5fc15dfde2f4681e7f50318aa5b0b38fa7f020f40728,0x1f45de951368b56b8323cd7320612ebd2d84127ac760cc580ee7ec25c14a53c5
#
# How to get your keys:
# 1. Access your Seal keyserver deployments (e.g., seal-4, seal-5, seal-6)
# 2. Extract the CLIENT_MASTER_KEY from each keyserver's configuration
# 3. Join them with commas (no spaces)
#
# WARNING: Do not use placeholder values like 'key1', 'key2', 'key3' - they will be ignored!
SEAL_SECRET_KEYS=your_seal_secret_keys_here

# Seal Key Server Object IDs (Optional, for verification/clustering)
# Format: Comma-separated list of hex object IDs from Seal keyservers on-chain
# These are used by seal-cli to validate keys against the blockchain
# Example: SEAL_KEY_SERVER_IDS=0x4af91bd94b19e1fabd12586b5392571f7b76e9b6076ef0813b0a1352fa3d2d10,0x6f0c33c9fa69d466a32ba1291174604bf4c7a58d7efc986341fe3c169c30338c
SEAL_KEY_SERVER_IDS=

# Seal Threshold (minimum number of keys needed for decryption)
# Current: 4 out of 6 key servers (allows up to 2 failures)
# This matches SONAR's 4-of-6 threshold encryption for production redundancy
SEAL_THRESHOLD=4

# Seal Package ID (Sui blockchain object ID of deployed Seal package)
# Get this from: sui client publish output when deploying Seal contracts
# Example: SEAL_PACKAGE_ID=0x8ed5834faad055067328dd44577e5fb7a6c6c61299483616061e642c465eda
SEAL_PACKAGE_ID=0x8ed5834faad055067328dd44577e5fb7a6c6c61299483616061e642c465eda

# SONAR Package ID (updated to v4 with hybrid_seal_policy module)
# v4 includes: hybrid encryption policy, admin access for verification & AI training, marketplace purchase access
# Package v4: 0x0210ab6cfe74c5dab23b1a0a0b588a9d61575e0231e4b09b8e19071abe1434f7
SONAR_PACKAGE_ID=0x0210ab6cfe74c5dab23b1a0a0b588a9d61575e0231e4b09b8e19071abe1434f7

# =============================================================================
# Walrus Encrypted Blob Storage Configuration
# =============================================================================
# Walrus is a data availability system where encrypted audio blobs are stored.
# These settings tell the audio verifier where to fetch encrypted blobs from.

# Walrus Aggregator URL
# This is the endpoint where encrypted blobs are stored
# Production (mainnet): https://wal-aggregator-mainnet.staketab.org:443
# Testing: https://wal-aggregator-testnet.staketab.org:443
WALRUS_AGGREGATOR_URL=https://wal-aggregator-mainnet.staketab.org:443

# Walrus Authentication Token (Optional)
# Only needed if your Walrus aggregator requires authentication
# Leave empty/commented out for public aggregators
# WALRUS_AGGREGATOR_TOKEN=your_walrus_token_here
